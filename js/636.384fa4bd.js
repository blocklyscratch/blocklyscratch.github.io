"use strict";(globalThis["webpackChunkcircleworld"]=globalThis["webpackChunkcircleworld"]||[]).push([[636],{40636:(e,t,s)=>{s.r(t),s.d(t,{default:()=>se});var i=s(61758),a=(s(63754),s(10239),s(29104)),o=s(38734),r=s(58790),n=s(23537),h=s(92367),l=s(33079),d=s(71394),m=s(20980),c={name:"shareOBJ"};const p=1024,u=768;s(3490);class w extends Phaser.Scene{constructor(){super("Boot")}create(){this.registry.set("highscore",0),this.scene.start("Preloader")}}class y extends Phaser.Scene{constructor(){super("Preloader"),this.loadText}preload(){this.loadText=this.add.text(512,360,"Loading ...",{fontFamily:"Arial",fontSize:74,color:"#e3f2ed"}),this.loadText.setOrigin(.5),this.loadText.setStroke("#203c5b",6),this.loadText.setShadow(2,2,"#2d2d2d",4,!0,!1),this.load.setPath("assets/games/snowmen-attack/"),this.load.image(["background","overlay","gameover","title"]),this.load.atlas("sprites","sprites.png","sprites.json"),this.load.glsl("snow","snow.glsl.js"),this.load.setPath("assets/games/snowmen-attack/sounds/"),this.load.audio("music",["music.ogg","music.m4a","music.mp3"]),this.load.audio("throw",["throw.ogg","throw.m4a","throw.mp3"]),this.load.audio("move",["move.ogg","move.m4a","move.mp3"]),this.load.audio("hit-snowman",["hit-snowman.ogg","hit-snowman.m4a","hit-snowman.mp3"]),this.load.audio("gameover",["gameover.ogg","gameover.m4a","gameover.mp3"])}create(){this.anims.create({key:"die",frames:this.anims.generateFrameNames("sprites",{prefix:"die",start:0,end:0,zeroPad:3})}),this.anims.create({key:"idle",frames:this.anims.generateFrameNames("sprites",{prefix:"idle",start:0,end:3,zeroPad:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"throwStart",frames:this.anims.generateFrameNames("sprites",{prefix:"throw",start:0,end:8,zeroPad:3}),frameRate:26}),this.anims.create({key:"throwEnd",frames:this.anims.generateFrameNames("sprites",{prefix:"throw",start:9,end:11,zeroPad:3}),frameRate:26}),this.anims.create({key:"snowmanIdleBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-idle",start:0,end:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"snowmanWalkBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-walk",start:0,end:7}),frameRate:8,repeat:-1}),this.anims.create({key:"snowmanThrowStartBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-throw",start:0,end:5}),frameRate:20}),this.anims.create({key:"snowmanThrowEndBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-throw",start:6,end:8}),frameRate:20}),this.anims.create({key:"snowmanDieBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-die",start:0,end:4}),frameRate:14}),this.anims.create({key:"snowmanIdleSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-idle",start:0,end:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"snowmanWalkSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-walk",start:0,end:7}),frameRate:8,repeat:-1}),this.anims.create({key:"snowmanThrowStartSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-throw",start:0,end:5}),frameRate:20}),this.anims.create({key:"snowmanThrowEndSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-throw",start:6,end:8}),frameRate:20}),this.anims.create({key:"snowmanDieSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-die",start:0,end:4}),frameRate:14}),this.sound.locked?(this.loadText.setText("Click to Start"),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))):this.scene.start("MainMenu")}}class g extends Phaser.Scene{constructor(){super("MainMenu")}create(){this.sound.play("music",{loop:!0,delay:2}),this.add.shader("snow",512,384,1024,768);let e=this.add.image(-64,300,"sprites","snowball1"),t=this.add.image(1088,360,"sprites","snowball1"),s=this.add.image(-64,320,"sprites","snowball1"),i=this.add.image(1700,384,"title");this.tweens.add({targets:e,x:1088,y:360,ease:"cubic.out",duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:t,x:-64,y:280,ease:"cubic.out",delay:700,duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:s,x:1088,y:380,ease:"cubic.out",delay:1200,duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:i,x:512,ease:"back.out",delay:1800,duration:600,onStart:()=>{this.sound.play("throw")}}),this.input.keyboard.once("keydown-SPACE",(()=>{this.scene.start("MainGame")}),this),this.input.once("pointerdown",(()=>{this.scene.start("MainGame")}))}}class v extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s){const i="Small"===s?"snowman-small-idle0":"snowman-big-idle0",a="Small"===s?80:-100;super(e,a,t.y,"sprites",i),this.setOrigin(.5,1),e.add.existing(this),e.physics.add.existing(this),"Small"===s?(this.body.setSize(100,100),this.body.setOffset(20,40)):(this.body.setSize(100,120),this.body.setOffset(50,50)),this.time=e.time,this.sound=e.sound,this.isAlive=!0,this.isThrowing=!1,this.size=s,this.speed=50,this.previousAction=0,this.currentTrack=t,this.play("snowmanIdle"+this.size)}start(){this.isAlive=!0,this.isThrowing=!1,this.previousAction=0,this.currentHitpoints=this.maxHitpoints,this.y=this.currentTrack.y,this.on("animationcomplete-snowmanThrowStart"+this.size,this.releaseSnowball,this),this.on("animationcomplete-snowmanThrowEnd"+this.size,this.throwComplete,this),this.setActive(!0),this.setVisible(!0),this.play("snowmanWalk"+this.size),this.setVelocityX(this.speed),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(3e3,6e3),this.chooseAction,[],this)}chooseAction(){this.isAlive=!0,this.body.enable=!0,this.setVelocityX(0);const e=Phaser.Math.Between(0,100);e<50?2===this.previousAction?this.walk():this.throw():e>60?this.walk():1===this.previousAction?e>55?this.walk():this.throw():this.goIdle()}walk(){this.previousAction=0,this.play("snowmanWalk"+this.size,!0),this.setVelocityX(this.speed),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(3e3,6e3),this.chooseAction,[],this)}goIdle(){this.previousAction=1,this.play("snowmanIdle"+this.size,!0),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(2e3,4e3),this.chooseAction,[],this)}throw(){this.previousAction=2,this.isThrowing=!0,this.play("snowmanThrowStart"+this.size)}releaseSnowball(){this.isAlive&&(this.play("snowmanThrowEnd"+this.size),this.currentTrack.throwEnemySnowball(this.x))}throwComplete(){this.isAlive&&(this.isThrowing=!1,this.play("snowmanIdle"+this.size),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(2e3,4e3),this.chooseAction,[],this))}hit(){this.chooseEvent&&this.chooseEvent.remove(),this.isAlive=!1,this.previousAction=-1,this.play("snowmanDie"+this.size),this.sound.play("hit-snowman"),this.body.stop(),this.body.enable=!1;const e="-="+Phaser.Math.Between(100,200).toString();this.scene.tweens.add({targets:this,x:e,ease:"sine.out",duration:1e3,onComplete:()=>{this.x<-100&&(this.x=-100)}}),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(1e3,3e3),this.chooseAction,[],this)}stop(){this.chooseEvent&&this.chooseEvent.remove(),this.isAlive=!1,this.play("snowmanIdle"+this.size),this.setVelocityX(0)}preUpdate(e,t){super.preUpdate(e,t),this.x>=880&&(this.stop(),this.scene.gameOver())}}class b extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s,i,a){super(e,t,s,i,a),this.setScale(.5)}fire(e,t){this.body.enable=!0,this.body.reset(e+10,t-44),this.setActive(!0),this.setVisible(!0),this.setVelocityX(-600),this.setAccelerationX(-1400)}stop(){this.setActive(!1),this.setVisible(!1),this.setVelocityX(0),this.body.enable=!1}preUpdate(e,t){super.preUpdate(e,t),this.x<=-64&&this.stop()}}class x extends Phaser.Physics.Arcade.Sprite{constructor(e,t,s,i,a){super(e,t,s,i,a),this.setScale(.5)}fire(e,t){this.body.enable=!0,this.body.reset(e+10,t-44),this.setActive(!0),this.setVisible(!0),this.setVelocityX(200)}stop(){this.setActive(!1),this.setVisible(!1),this.setVelocityX(0),this.body.enable=!1}preUpdate(e,t){super.preUpdate(e,t),this.x>=970&&(this.stop(),this.scene.gameOver())}}class f{constructor(e,t,s){this.scene=e,this.id=t,this.y=s,this.nest=e.physics.add.image(1024,s-10,"sprites","nest").setOrigin(1,1),this.snowmanBig=new v(e,this,"Big"),this.snowmanSmall=new v(e,this,"Small"),this.playerSnowballs=e.physics.add.group({frameQuantity:8,key:"sprites",frame:"snowball2",active:!1,visible:!1,classType:b}),this.enemySnowballs=e.physics.add.group({frameQuantity:8,key:"sprites",frame:"snowball3",active:!1,visible:!1,classType:x}),this.snowBallCollider=e.physics.add.overlap(this.playerSnowballs,this.enemySnowballs,this.hitSnowball,null,this),this.snowmanSmallCollider=e.physics.add.overlap(this.snowmanSmall,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanBigCollider=e.physics.add.overlap(this.snowmanBig,this.playerSnowballs,this.hitSnowman,null,this),this.releaseTimerSmall,this.releaseTimerBig}start(e,t){const s=Phaser.Math.Between(e,t);this.releaseTimerSmall=this.scene.time.addEvent({delay:s,callback:()=>{this.snowmanSmall.start()}}),this.releaseTimerBig=this.scene.time.addEvent({delay:3*s,callback:()=>{this.snowmanBig.start()}})}stop(){this.snowmanSmall.stop(),this.snowmanBig.stop();for(let e of this.playerSnowballs.getChildren())e.stop();for(let e of this.enemySnowballs.getChildren())e.stop();this.releaseTimerSmall.remove(),this.releaseTimerBig.remove()}hitSnowball(e,t){e.stop(),t.stop()}hitSnowman(e,t){e.isAlive&&e.x>0&&(t.stop(),e.hit())}throwPlayerSnowball(e){let t=this.playerSnowballs.getFirstDead(!1);t&&t.fire(e,this.y)}throwEnemySnowball(e){let t=this.enemySnowballs.getFirstDead(!1);t&&t.fire(e,this.y)}}class k extends Phaser.Physics.Arcade.Sprite{constructor(e,t){super(e,900,t.y,"sprites","idle000"),this.setOrigin(.5,1),e.add.existing(this),e.physics.add.existing(this),this.isAlive=!0,this.isThrowing=!1,this.sound=e.sound,this.currentTrack=t,this.spacebar=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.up=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP),this.down=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN),this.play("idle")}start(){this.isAlive=!0,this.isThrowing=!1,this.currentTrack=this.scene.tracks[0],this.y=this.currentTrack.y,this.on("animationcomplete-throwStart",this.releaseSnowball,this),this.on("animationcomplete-throwEnd",this.throwComplete,this),this.play("idle",!0)}moveUp(){0===this.currentTrack.id?this.currentTrack=this.scene.tracks[3]:this.currentTrack=this.scene.tracks[this.currentTrack.id-1],this.y=this.currentTrack.y,this.sound.play("move")}moveDown(){3===this.currentTrack.id?this.currentTrack=this.scene.tracks[0]:this.currentTrack=this.scene.tracks[this.currentTrack.id+1],this.y=this.currentTrack.y,this.sound.play("move")}throw(){this.isThrowing=!0,this.play("throwStart"),this.sound.play("throw")}releaseSnowball(){this.play("throwEnd"),this.currentTrack.throwPlayerSnowball(this.x)}throwComplete(){this.isThrowing=!1,this.play("idle")}stop(){this.isAlive=!1,this.body.stop(),this.play("die")}preUpdate(e,t){super.preUpdate(e,t),this.isAlive&&(Phaser.Input.Keyboard.JustDown(this.up)?this.moveUp():Phaser.Input.Keyboard.JustDown(this.down)?this.moveDown():Phaser.Input.Keyboard.JustDown(this.spacebar)&&!this.isThrowing&&this.throw())}}class I extends Phaser.Scene{constructor(){super("MainGame"),this.player,this.tracks,this.score=0,this.highscore=0,this.infoPanel,this.scoreTimer,this.scoreText,this.highscoreText}create(){this.score=0,this.highscore=this.registry.get("highscore"),this.add.image(512,384,"background"),this.tracks=[new f(this,0,196),new f(this,1,376),new f(this,2,536),new f(this,3,700)],this.player=new k(this,this.tracks[0]),this.add.image(0,0,"overlay").setOrigin(0),this.add.image(16,0,"sprites","panel-score").setOrigin(0),this.add.image(1008,0,"sprites","panel-best").setOrigin(1,0),this.infoPanel=this.add.image(512,384,"sprites","controls"),this.scoreText=this.add.text(140,2,this.score,{fontFamily:"Arial",fontSize:32,color:"#ffffff"}),this.highscoreText=this.add.text(820,2,this.highscore,{fontFamily:"Arial",fontSize:32,color:"#ffffff"}),this.input.keyboard.once("keydown-SPACE",this.start,this),this.input.keyboard.once("keydown-UP",this.start,this),this.input.keyboard.once("keydown-DOWN",this.start,this)}start(){this.input.keyboard.removeAllListeners(),this.tweens.add({targets:this.infoPanel,y:700,alpha:0,duration:500,ease:"Power2"}),this.player.start(),this.tracks[0].start(4e3,8e3),this.tracks[1].start(500,1e3),this.tracks[2].start(5e3,9e3),this.tracks[3].start(6e3,1e4),this.scoreTimer=this.time.addEvent({delay:1e3,callback:()=>{this.score++,this.scoreText.setText(this.score)},callbackScope:this,repeat:-1})}gameOver(){this.infoPanel.setTexture("gameover"),this.tweens.add({targets:this.infoPanel,y:384,alpha:1,duration:500,ease:"Power2"}),this.tracks.forEach((e=>{e.stop()})),this.sound.stopAll(),this.sound.play("gameover"),this.player.stop(),this.scoreTimer.destroy(),this.score>this.highscore&&(this.highscoreText.setText("NEW!"),this.registry.set("highscore",this.score)),this.input.keyboard.once("keydown-SPACE",(()=>{this.scene.start("MainMenu")}),this),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}),this)}}var P=s(29283),S=s(45291);const D=["id"],A={__name:"phaserVue",props:{init:{type:Object,default:()=>({x:10,y:50,bPlayerUserIDJoin:!1,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:"theGameIDorRoomID",userID:"qqqqMapping0",userName:"qqqq Name",nSpriteIndex:0,zIndex:"+3",nSpriteIndex:1,zIndex:"+0"})},watchKeyboard:{type:Boolean,default:!0},oToPhWindowAPI:{type:Function,default:()=>null}},setup(e){const t=e,s=(0,l.Y)(),a=(0,P.M)(),r=(0,d.X)();(0,m.f)(),(0,S.u)();let n=(0,o.KR)(t.init.sPhaserID),h={},c=(0,o.KR)(t.init.gameIDorRoomID);function v(e,t){let s=h.config.phaser;if(s.bAfterCreate)if("setTargetBlocklyCB"==e)a.fromBlocklyCB=s.oToPhaserAPI.fromBlocklyCB,a.gameConfigPhaser=s;else{let i=s.oToPhaserAPI.store2phaserCB;if(void 0!=i)return i(e,t)}}function b(e){"removeCB"==e.cmd?(a.fromBlocklyCB=null,a.gameConfigPhaser=null):r.sourcePhaserToWorkerAndSend(e.cmd,{update:e.update,gameIDorRoomID:c.value,sPhaserID:n.value})}function x(e){r.sourcePhaserToWorkerAndSend(e.cmd,{update:e.update,gameIDorRoomID:c.value,sPhaserID:n.value,targetMirror:t.init.targetMirror,targetPhaserName:t.init.targetPhaserName})}return(0,i.sV)((()=>{const e={type:Phaser.AUTO,width:p,height:u,parent:n.value,physics:{default:"arcade",arcade:{debug:!1}},scene:[w,y,g,I]};h=new Phaser.Game(e),h.events.addListener(Phaser.Core.Events.FOCUS,(()=>{}),this),h.events.addListener(Phaser.Core.Events.BLUR,(()=>{}),this),h.events.addListener(Phaser.Core.Events.PAUSE,(()=>{t.oToPhWindowAPI({cmd:"PAUSE",phaser:"base",issue:"Phaser PAUSE"})}),this),h.events.addListener(Phaser.Core.Events.RESUME,(()=>{t.oToPhWindowAPI({cmd:"onlineReload",phaser:"base",issue:"Phaser RESUME"})}),this),h.config.phaser={id:n.value,init:t.init,scene:"boot",oToPhaserAPI:{},isGamePause:!1,hasDebugText:!1,oToWorkerAPI:b,oToWorkerAPI2S:x,oToPhWindowAPI:t.oToPhWindowAPI,oStatusFromServer:{},bClientHasAllStatus:!1,bAfterCreate:!1,nAskForServerTimeOut:10},s.registerGame(h.config.phaser),r.registerPhaserCBByGameIDorRoomID(n.value,c.value,v)})),(0,i.hi)((()=>{let e=h.config.phaser;a.clearFromBlocklyCB(e),v("phaser_BroadCast_w2p",{subCmd:"destroy"}),s.unRegisterGame(n.value),h.destroy(),r.registerPhaserCBByGameIDorRoomID(n.value,c.value,void 0),e.bAfterCreate&&(e.oToPhaserAPI.store2phaserCB=void 0,e.oToPhaserAPI.fromBlocklyCB=void 0)})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",{id:(0,o.R1)(n)},null,8,D))}},T=A,C=T;var B=s(14907),F=s(89822);const M={class:"windowAPPBodyCSS"},R={class:"moveTop6px"},z={class:"moveBottom6px"},E={class:"moveRight6px"},W={class:"moveLeft6px"},K={__name:"phaserWindow",props:{init:{type:Object,default:()=>({position:"absolute",left:500,top:580,width:320,height:200,bPlayerUserIDJoin:!1,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:"theGameIDorRoomID",userID:"qqqqMapping0",userName:"qqqq Name",nSpriteIndex:0,zIndex:"+3",nSpriteIndex:1,zIndex:"+0"})},windowReStyle:{type:Number,default:0},moveWindowAble:{type:Boolean,default:!1},watchKeyboard:{type:Boolean,default:!0}},emits:["doExit"],setup(e,{emit:t}){const{t:s}=(0,n.s9)(),w=(0,S.u)(),y=(0,F.J)(),g=((0,B.A)(),e),v=(0,d.X)(),b=(0,m.f)(),x=((0,l.Y)(),(0,o.KR)(3)),f=p+3,k=u+x.value,I=u/p,P=300*I+x.value,D=(0,o.Kh)({position:g.init.position,style:"top:"+g.init.top+"px;left:"+g.init.left+"px;width:"+(g.init.width?g.init.width:803)+"px;max-width:"+f+"px;max-height:"+k+"px;z-index: "+g.init.zIndex+";min-height:"+P+"px;height:"+(g.init.height?g.init.height:603)+"px",top:g.init.top,left:g.init.left,width:g.init.width?g.init.width:803,height:g.init.height?g.init.height:603,realWidth:g.init.width?g.init.width:803,realHeight:g.init.height?g.init.height:603,maximizedMode:1,isDisplay:!0}),A=(0,o.KR)(!1),T=(0,o.KR)({}),K=(0,o.KR)({title:"Snowmen",level:"Win",name:w.data.name,time:0,jsChangeCount:0,jsLinesCount:0}),_=(0,o.KR)(!0),L=(0,o.KR)(!0),N=(0,o.KR)(""),U=(0,o.KR)(0),q=(0,o.KR)(!1),X=t;let O=null;function V(){g.watchKeyboard&&(_.value=!_.value)}function j(){U.value!=D.top&&(U.value=D.top,window.dispatchEvent(new Event("resize")))}function Q(){null!=O&&clearTimeout(O),O=setTimeout((()=>{O=null,G()}),300)}function J(e){K.value={title:"Snowmen",level:"Win",name:w.data.name,time:e,jsChangeCount:0,jsLinesCount:b.jsLinesCount},T.value={title:"Snowmen",level:"Win",name:w.data.name,time:e,jsChangeCount:0,jsLinesCount:b.jsLinesCount};let t=!0,s=w.badgeList;for(let i=s.length-1;i>-1;i--)if("Win"==s[i].level){s[i].time>K.value.time?s.splice(i,1):(T.value.time=s[i].time,T.value.jsLinesCount=s[i].jsLinesCount,t=!1);break}t&&(s.push(T.value),y.setFromStorage(y.storageNamePWD.phaserBlockly,{name:w.data.name,randomID:y.randomID,badgeList:s}),y.initByStorage()),A.value=!0}function G(){let e=(D.realWidth-3)/p,t=(D.width-3-p)/2,s=(D.height-x.value-u)/2,a=(D.realHeight-x.value)/u;N.value="position:absolute;z-index: +1;top:"+s+"px;left:"+t+"px;transform:scale("+e+", "+a+")",D.style="both;top:"+D.top+"px;left:"+D.left+"px;width:"+D.width+"px;max-width:"+f+"px;max-height:"+k+"px;z-index: "+g.init.zIndex+";min-height:"+P+"px;height:"+D.height+"px",(0,i.dY)((()=>{window.dispatchEvent(new Event("resize"))}))}function H(e){c.count=e.width,e.width>0&&(D.realWidth=e.width,D.realHeight=e.height,2!=D.maximizedMode&&(D.width=D.realWidth,D.height=D.realHeight,G(),Q()))}function Y(e){switch(D.top+=e.delta.y,D.left+=e.delta.x,D.maximizedMode){case 1:D.style="both;top:"+D.top+"px;left:"+D.left+"px;width:"+D.width+"px;max-width:"+f+"px;max-height:"+k+"px;z-index: "+g.init.zIndex+";min-height:"+P+"px;height:"+D.height+"px";break;case 2:D.style="top:"+D.top+"px;left:"+D.left+"px;width:auto;height:auto";break;default:}e.isFirst?0==D.maximizedMode&&(D.top=e.position.top,D.left=e.position.left,D.style="both;top:"+D.top+"px;left:"+D.left+"px;width:"+D.width+"px;max-width:"+f+"px;max-height:"+k+"px;z-index: "+g.init.zIndex+";min-height:"+P+"px;height:"+D.height+"px",D.maximizedMode=1):e.isFinal}function $(){D.maximizedMode=1,D.height=(D.realWidth-3)*I+x.value,G()}function Z(e){switch(e.cmd){case"youWin":L.value=!1,(0,i.dY)((()=>{L.value=!0})),J(e.issue);break;case"gameStart":b.jsChangeCount=0,b.jsLinesCount=0;break;case"PAUSE":v.bLoopMode||(L.value=!1);break;case"replayReload":L.value=!1,(0,i.dY)((()=>{L.value=!0}));break;case"onlineReload":v.bLoopMode||(L.value=!1,(0,i.dY)((()=>{L.value=!0})));break;default:}}return(0,i.wB)((()=>D.realWidth),(e=>{Q()}),{immediate:!0}),(0,i.wB)((()=>g.windowReStyle),(e=>{D.position=g.init.position,D.left=g.init.left,D.top=g.init.top,D.width=g.init.width,D.height=g.init.height,G()}),{immediate:!0}),(0,i.sV)((()=>{_.value=g.watchKeyboard,G(),setTimeout((()=>{q.value=!0}),5e3)})),(0,i.hi)((()=>{null!=O&&clearTimeout(O)})),(t,n)=>{const l=(0,i.g2)("q-tooltip"),d=(0,i.g2)("q-btn"),m=(0,i.g2)("q-bar"),c=(0,i.g2)("q-icon"),p=(0,i.g2)("q-resize-observer"),u=(0,i.g2)("q-card"),y=(0,i.g2)("q-card-section"),v=(0,i.g2)("q-dialog"),b=(0,i.gN)("touch-pan");return(0,i.uX)(),(0,i.CE)("div",{onClick:n[5]||(n[5]=(0,a.D$)((e=>(0,o.R1)(w).onClickForMainInput(e)),["stop"])),onMousemove:j},[(0,i.bo)((0,i.bF)(u,{class:"windowAPPCSS",style:(0,r.Tr)(D.style)},{default:(0,i.k6)((()=>[g.moveWindowAble?((0,i.uX)(),(0,i.Wv)(m,{key:0,class:"hideBar"},{default:(0,i.k6)((()=>[(0,i.bF)(d,{dense:"",flat:"",icon:"crop_square",onClick:n[0]||(n[0]=e=>$()),disable:0==D.maximizedMode},{default:(0,i.k6)((()=>[0==!D.maximizedMode?((0,i.uX)(),(0,i.Wv)(l,{key:0,class:"bg-white text-primary"},{default:(0,i.k6)((()=>n[6]||(n[6]=[(0,i.eW)("Aspect ratio")]))),_:1})):(0,i.Q3)("",!0)])),_:1},8,["disable"]),(0,i.bF)(d,{dense:"",flat:"",icon:"close",onClick:n[1]||(n[1]=e=>L.value=!L.value)},{default:(0,i.k6)((()=>[(0,i.bF)(l,{class:"bg-white text-primary"},{default:(0,i.k6)((()=>n[7]||(n[7]=[(0,i.eW)("Close")]))),_:1})])),_:1})])),_:1})):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[q.value?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[g.init.bPlayerUserIDJoin?((0,i.uX)(),(0,i.Wv)(m,{key:0,class:"hideBar"},{default:(0,i.k6)((()=>[(0,i.bF)(c,{style:{cursor:"pointer"},name:_.value?"keyboard_hide":"keyboard",onClick:n[2]||(n[2]=(0,a.D$)((e=>V()),["prevent","stop"])),title:"key board"},null,8,["name"]),(0,i.bF)(c,{style:{cursor:"pointer"},name:"logout",onClick:n[3]||(n[3]=(0,a.D$)((e=>X("doExit")),["prevent","stop"])),title:"Exit"})])),_:1})):(0,i.Q3)("",!0)],64)):(0,i.Q3)("",!0)],64)),(0,i.bo)((0,i.Lk)("div",M,[L.value?((0,i.uX)(),(0,i.Wv)(C,{key:0,style:(0,r.Tr)(N.value),init:e.init,watchKeyboardLocal:_.value,oToPhWindowAPI:Z},null,8,["style","init","watchKeyboardLocal"])):(0,i.Q3)("",!0)],512),[[a.aG,2!=D.maximizedMode]]),(0,i.bF)(p,{onResize:H}),g.moveWindowAble?((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.bo)((0,i.Lk)("div",R,null,512),[[b,Y,void 0,{prevent:!0,mouse:!0}]]),(0,i.bo)((0,i.Lk)("div",z,null,512),[[b,Y,void 0,{prevent:!0,mouse:!0}]]),(0,i.bo)((0,i.Lk)("div",E,null,512),[[b,Y,void 0,{prevent:!0,mouse:!0}]]),(0,i.bo)((0,i.Lk)("div",W,null,512),[[b,Y,void 0,{prevent:!0,mouse:!0}]])],64)):(0,i.Q3)("",!0)])),_:1},8,["style"]),[[a.aG,D.isDisplay]]),(0,i.bF)(v,{modelValue:A.value,"onUpdate:modelValue":n[4]||(n[4]=e=>A.value=e)},{default:(0,i.k6)((()=>[(0,i.bF)(u,{style:{width:"370px","font-size":"24px",color:"chocolate"}},{default:(0,i.k6)((()=>[(0,i.bF)(y,{class:"row items-center"},{default:(0,i.k6)((()=>[(0,i.eW)((0,r.v_)((0,o.R1)(s)("winBadge"))+": ",1),(0,i.bF)(h.A,{badgeList:[K.value]},null,8,["badgeList"]),(0,i.eW)(" "+(0,r.v_)((0,o.R1)(s)("fastestScore"))+": ",1),(0,i.bF)(h.A,{badgeList:[T.value]},null,8,["badgeList"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],32)}}};var _=s(12807),L=s(23316),N=s(18670),U=s(1693),q=s(97410),X=s(50492),O=s(1096),V=s(20558),j=s(66570),Q=s(89390),J=s(98582),G=s.n(J);const H=(0,_.A)(K,[["__scopeId","data-v-45b77260"]]),Y=H;G()(K,"components",{QCard:L.A,QBar:N.A,QBtn:U.A,QTooltip:q.A,QIcon:X.A,QResizeObserver:O.A,QDialog:V.A,QCardSection:j.A}),G()(K,"directives",{TouchPan:Q.A});const $={class:"mainflexcontainer"},Z={class:"phaserArea"},ee={__name:"snowmenAttack_org",setup(e){const t=(0,o.Kh)({gameIDorRoomID:"gamebaseIDorRoomID"+Math.random().toFixed(3).slice(2),phServerChangeTime:0,userCurrent:0,userMax:10}),a=(0,o.Kh)({showup:!0,init:{left:80,top:50,width:600,height:450,bPlayerUserIDJoin:!1,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"1_"+Math.random().toFixed(8).slice(2),userName:"1_"+Math.random().toFixed(8).slice(2),zIndex:"+5"}});(0,o.Kh)({showup:!0,init:{left:450,top:50,bPlayerUserIDJoin:!0,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"2_"+Math.random().toFixed(8).slice(2),userName:"2_"+Math.random().toFixed(8).slice(2),zIndex:"+6"}}),(0,o.Kh)({showup:!1,init:{left:820,top:50,bPlayerUserIDJoin:!1,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"3_"+Math.random().toFixed(8).slice(2),userName:"3_"+Math.random().toFixed(8).slice(2),zIndex:"+2"}}),(0,o.Kh)({showup:!1,init:{left:80,top:420,bPlayerUserIDJoin:!0,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"4_"+Math.random().toFixed(8).slice(2),userName:"4_"+Math.random().toFixed(8).slice(2),zIndex:"+3"}}),(0,o.Kh)({showup:!1,init:{left:450,top:420,bPlayerUserIDJoin:!0,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"5_"+Math.random().toFixed(8).slice(2),userName:"5_"+Math.random().toFixed(8).slice(2),zIndex:"+3"}}),(0,o.Kh)({showup:!1,init:{left:820,top:420,bPlayerUserIDJoin:!0,sPhaserID:"pBase"+Math.random().toFixed(8).slice(2),gameIDorRoomID:t.gameIDorRoomID,userID:"6_"+Math.random().toFixed(8).slice(2),userName:"6_"+Math.random().toFixed(8).slice(2),zIndex:"+2"}});s(7958);const r=(0,m.f)(),h=(0,S.u)(),l=(0,d.X)(),{t:c,locale:p}=(0,n.s9)();(0,o.KR)(!1);(0,i.wB)((()=>h.localStorage.localeUI),(e=>{null!=e&&localeChange()})),(0,i.wB)((()=>h.localStorage.localeBlockly),(e=>{null!=e&&localeChange()}));let u=null;return(0,i.sV)((()=>{l.bLoopMode=!0})),(0,i.hi)((()=>{r.exitJSCode(),null!=u&&clearInterval(u)})),(e,t)=>((0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("div",Z,[a.showup?((0,i.uX)(),(0,i.Wv)(Y,{key:0,init:a.init,moveWindowAble:!0},null,8,["init"])):(0,i.Q3)("",!0)])]))}},te=(0,_.A)(ee,[["__scopeId","data-v-0a6bd30b"]]),se=te}}]);