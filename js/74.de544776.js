"use strict";(globalThis["webpackChunkcircleworld"]=globalThis["webpackChunkcircleworld"]||[]).push([[74],{50074:(e,l,a)=>{a.r(l),a.d(l,{default:()=>T});a(10239);var t=a(61758),i=a(58790),n=a(29104),o=a(14907),u=a(12113),r=a(38734);const s={key:0,class:"flex",style:{"font-size":"64px",color:"white",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100vh","z-index":"+1","background-color":"rgba(0, 0, 0, 0.8)"}},d={class:"flex"},v={class:"flex"},c={style:{width:"100%",height:"200px",overflow:"auto",border:"1px solid blue"}},m=["innerHTML"],p={style:{width:"100%",height:"500px",overflow:"auto",border:"1px solid yellow"}},b={style:{width:"100%","margin-top":"3px",border:"1px solid lightblue"}},g=["onClick"],f=["innerHTML"],k={__name:"showFirebase",setup(e){var l=a(7958);const k=(0,r.KR)("{}"),h=(0,u.K)(),L=(0,r.KR)([]),y=(0,r.KR)({}),w=(0,r.KR)([]),_=(0,r.KR)(!1),x=(0,r.KR)({}),C=(0,r.KR)(!1);(0,o.A)();function F(){y.value=JSON.parse(k.value),L.value.forEach((e=>{let l=e.data;void 0==y.value[l.randomID]&&(y.value[l.randomID]={nameList:[],latestTime:0,datatimeList:[],randomID:l.randomID,count:0});let a=y.value[l.randomID];a.count++,a.latestTime<l.datatime&&(a.latestTime=l.datatime),a.datatimeList.push(l.datatime),l.name&&a.nameList.indexOf(l.name)<0&&a.nameList.push(l.name),l.q_platform&&(a.q_platform=l.q_platform)})),w.value=[];for(const e in y.value){const l=y.value[e];w.value.push({id:l.randomID,dateTime:l.latestTime})}w.value.sort(((e,l)=>e.dateTime>l.dateTime?-1:1))}function T(){document.getElementById("sFFileUpload").click()}function q(e){const l=new FileReader;l.onload=e=>{try{JSON.parse(e.target.result);k.value=e.target.result,F()}catch(l){k.value="{}"}document.getElementById("sFFileUpload").value=""},l.onerror=e=>{},l.readAsText(e.target.files[0])}function D(){var e=new Blob([JSON.stringify(y.value)]);l.saveAs(e,"firebaseLog.txt")}async function I(){_.value=!0,L.value=await h.get(),_.value=!1}async function A(){_.value=!0,await h.deleteAll(L.value),L.value=await h.get(),_.value=!1}return(0,t.wB)(L,(e=>{F()})),(0,t.sV)((async()=>{})),(e,l)=>{const a=(0,t.g2)("q-btn"),o=(0,t.g2)("q-icon"),u=(0,t.g2)("q-card"),r=(0,t.g2)("q-dialog");return(0,t.uX)(),(0,t.CE)("div",null,[_.value?((0,t.uX)(),(0,t.CE)("div",s,l[2]||(l[2]=[(0,t.Lk)("div",{style:{margin:"auto"}},"Waiting",-1)]))):(0,t.Q3)("",!0),(0,t.Lk)("div",d,[(0,t.bF)(a,{dense:"","no-caps":"",color:"negative",label:"Clear FireBase (Dobule Click)",onDblclick:A,class:"btnStyle"}),(0,t.eW)(" ("+(0,i.v_)(L.value.length)+") ",1),(0,t.bF)(a,{dense:"","no-caps":"",color:"accent",label:"Reload Firebase",onClick:I,class:"btnStyle"}),(0,t.bF)(a,{dense:"","no-caps":"",color:"primary",label:"Clear PreLoad ("+k.value.length+")",onClick:l[0]||(l[0]=()=>{k.value="{}",F()}),class:"btnStyle"},null,8,["label"]),(0,t.Lk)("div",v,[(0,t.Lk)("input",{id:"sFFileUpload",type:"file",hidden:"",accept:".txt",name:"file",onChange:q,style:{cursor:"pointer"}},null,32),(0,t.bF)(o,{name:"cloud_upload",onClick:T,size:"38px",style:{cursor:"pointer",margin:"3px"},class:"qicon iMouseOverGray"}),(0,t.bF)(o,{title:"cloud download",name:"cloud_download",onClick:D,size:"38px",style:{cursor:"pointer",margin:"3px"},class:"qicon iMouseOverGray"})])]),l[3]||(l[3]=(0,t.Lk)("br",null,null,-1)),(0,t.Lk)("div",c,[(0,t.Lk)("pre",{innerHTML:JSON.stringify(L.value,null,2)},null,8,m)]),(0,t.Lk)("div",p,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(w.value,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{key:"doingDataObj"+l},[(0,t.Lk)("div",b,[(0,t.Lk)("div",null,"Name list:"+(0,i.v_)(y.value[e.id].nameList),1),(0,t.Lk)("div",null," latestTime:"+(0,i.v_)(new Date(y.value[e.id].latestTime).toLocaleString()),1),(0,t.Lk)("div",null,"Count:"+(0,i.v_)(y.value[e.id].count),1),(0,t.Lk)("div",{onClick:(0,n.D$)((()=>{y.value[e.id].q_platform&&(x.value=y.value[e.id].q_platform,C.value=!0)}),["stop","prevent"]),style:{cursor:"pointer"}}," q_platform:"+(0,i.v_)(y.value[e.id].q_platform?y.value[e.id].q_platform.is.platform+"-"+y.value[e.id].q_platform.is.name:""),9,g),(0,t.Lk)("div",null,"randomID:"+(0,i.v_)(y.value[e.id].randomID),1),(0,t.Lk)("div",null,"datatimeList:"+(0,i.v_)(y.value[e.id].datatimeList),1)])])))),128))]),(0,t.bF)(r,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e)},{default:(0,t.k6)((()=>[(0,t.bF)(u,{style:{"min-width":"80vw","min-height":"80vh"}},{default:(0,t.k6)((()=>[(0,t.Lk)("pre",{innerHTML:JSON.stringify(x.value,null,2)},null,8,f)])),_:1})])),_:1},8,["modelValue"])])}}};var h=a(12807),L=a(1693),y=a(50492),w=a(20558),_=a(23316),x=a(98582),C=a.n(x);const F=(0,h.A)(k,[["__scopeId","data-v-470b7ddb"]]),T=F;C()(k,"components",{QBtn:L.A,QIcon:y.A,QDialog:w.A,QCard:_.A})}}]);